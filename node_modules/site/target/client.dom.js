"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.parseElement=exports.removePerspectiveTransform=exports.transformStringWithoutPerspective=exports.setTransformItemValue=exports.updateTransformItemValue=exports.stringifyTransform=exports.parseTransform=exports.initElementEvents=exports.getCustomEventName=exports.isLastPositionedInputInElement=exports.isInputInElement=exports.getStyle=exports.setStyle=void 0;var e=require("./shared.manifest"),t=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(require("./client.browser"));var n,r,o,i,a,c,u,s,l,d,v,p,h,m,f,E,_,w,D,T,x,g,y,I,L,S,P,b,k,M,Y,X,O,q,A,W,z=function(e){return null!=e},F=function(e,t,n,r){return e(t)[n](t,...r)},N=function(e,t){var n=e,r=n.split("\n");return n=(r=r.map(e=>{var t=e.indexOf(" #");return-1===t?e:e.substr(0,t)})).join("").replace(/\s/g,""),new RegExp(n,t)};exports.setStyle=n=function(t,n,r){return o=F(e.dotDot_573300145710716007,n,"capitalize",[]),i="Moz"+o,a="webkit"+o,c="ms"+o,void 0!==t.style[n]?void(t.style[n]=r):(()=>void 0!==t.style[i]?void(t.style[i]=r):(()=>void 0!==t.style[a]?void(t.style[a]=r):(()=>void 0!==t.style[c]?void(t.style[c]=r):void 0)())())();var o,i,a,c},exports.getStyle=r=function(t,n){return o="Moz"+(r=F(e.dotDot_573300145710716007,n,"capitalize",[])),i="webkit"+r,a="ms"+r,void 0===(u=void 0===(s=void 0===(l=(c=t.style)[n])?c[o]:l)?c[i]:s)?c[a]:u;var r,o,i,a,c,u,s,l},exports.isInputInElement=o=function(e,t){return(()=>!(!e.contains(t.target)||!e.contains(document.elementFromPoint(t.clientX,t.clientY))))()},exports.isLastPositionedInputInElement=i=function(e){return(()=>!!z(a)&&(()=>o(e,a))())()},a=null,document.body.addEventListener("mousemove",function(e){a=e}),document.body.addEventListener("touchmove",function(e){return(()=>1===e.touches.length?void(a=e.changedTouches[0]):void 0)()}),exports.getCustomEventName=c=function(e){return(()=>e+"-705357537593286848")()},u=function(e,t){return(n=document.createEvent("Event")).initEvent("click-705357537593286848",!0,!0),n.clientX=e,n.clientY=t,n;var n},s=function(){var e;return(e=document.createEvent("Event")).initEvent("hold-705357537593286848",!0,!0),e},l=function(e,t){return(n=document.createEvent("Event")).initEvent("pointer-down-705357537593286848",!0,!0),n.clientX=e,n.clientY=t,n;var n},d=function(e,t){return(n=document.createEvent("Event")).initEvent("pointer-up-705357537593286848",!0,!0),n.clientX=e,n.clientY=t,n;var n},v=function(e,t){return(n=document.createEvent("Event")).initEvent("pointer-down-move-705357537593286848",!0,!0),n.clientX=e,n.clientY=t,n;var n},p=function(){var e;return(e=document.createEvent("Event")).initEvent("pointer-down-leave-705357537593286848",!1,!1),e},h=function(e){return(t=document.createEvent("Event")).initEvent("wheel-705357537593286848",!0,!0),t.delta=e,t;var t},m=function(e){return(t=document.createEvent("Event")).initEvent("wheel-start-705357537593286848",!0,!0),t.forward=e,t;var t},f=function(){var e;return(e=document.createEvent("Event")).initEvent("scroll-start-705357537593286848",!1,!1),e},E=function(){var e;return(e=document.createEvent("Event")).initEvent("scroll-end-705357537593286848",!1,!1),e},exports.initElementEvents=_=function(e){return(()=>Array.from(e.getElementsByTagName("*")).concat(e).forEach(function(e){return(()=>e.eventsInited_705357537593286848?void 0:(()=>(e.eventsInited_705357537593286848=!0,x(e),S(e),L(e),b(e),k(e)))())()}))()},w=[],D=null,T=function(){return w.forEach(function(e){e.clickDetectStartTime_705357537593286848=null}),void(w=[])},x=function(e){return n=function(){return(()=>(function t(n){return void 0===n&&(n=e),z(n)?(()=>void 0===(r=n.clickThreshold_705357537593286848)||null===r?t(n.parentElement):r)():36e5;var r})())()},e.clickDetectStartTime_705357537593286848=null,r=null,["handheld","tablet"].indexOf(t.deviceType)>=0?(()=>(e.addEventListener("touchstart",function(t){return 1===t.touches.length?e.clickDetectStartTime_705357537593286848=window.performance.now():e.clickDetectStartTime_705357537593286848=null,void(r=t)}),e.addEventListener("touchend",function(t){return z(e.clickDetectStartTime_705357537593286848)&&0===t.touches.length&&o(e,t.changedTouches[0])&&z(r)&&!r.clickDispatched_705357537593286848&&!r.holdDispatched_705357537593286848&&window.performance.now()-e.clickDetectStartTime_705357537593286848<n()&&(()=>(r.clickDispatched_705357537593286848=!0,e.dispatchEvent(u(t.changedTouches[0].clientX,t.changedTouches[0].clientY))))(),void(e.clickDetectStartTime_705357537593286848=null)})))():(()=>(e.addEventListener("mousedown",function(t){return t!==D&&(()=>(D=t,T()))(),0===t.button?(()=>(e.clickDetectStartTime_705357537593286848=window.performance.now(),w.push(e)))():e.clickDetectStartTime_705357537593286848=null,void(r=t)}),e.addEventListener("mouseup",function(t){return w.indexOf(e)>=0&&z(e.clickDetectStartTime_705357537593286848)&&0===t.button&&e.contains(t.target)&&z(r)&&!r.clickDispatched_705357537593286848&&!r.holdDispatched_705357537593286848&&window.performance.now()-e.clickDetectStartTime_705357537593286848<n()&&(()=>(r.clickDispatched_705357537593286848=!0,e.dispatchEvent(u(t.clientX,t.clientY))))(),void(e.clickDetectStartTime_705357537593286848=null)})))();var n,r},g=[],y=null,I=function(){return g.forEach(function(e){return(()=>e.clearDelay_705357537593286848())()}),void(g=[])},L=function(e){return n=function(){return(()=>(function t(n){return void 0===n&&(n=e),z(n)?(()=>void 0===(r=n.holdThreshold_705357537593286848)||null===r?t(n.parentElement):r)():72e5;var r})())()},r=null,e.setDelay_705357537593286848=function(t,o){r=window.setTimeout(function(){return(()=>i(e)&&g.indexOf(e)>=0&&e.contains(t.target)&&!o.clickDispatched_705357537593286848&&!o.holdDispatched_705357537593286848?(()=>(o.holdDispatched_705357537593286848=!0,e.dispatchEvent(s())))():void 0)()},n())},e.clearDelay_705357537593286848=function(){return z(r)&&(()=>window.clearTimeout(r))(),void(r=null)},["handheld","tablet"].indexOf(t.deviceType)>=0?(()=>(e.addEventListener("touchstart",function(t){return(()=>(e.clearDelay_705357537593286848(),1===t.touches.length?(()=>(a=t.changedTouches[0],e.setDelay_705357537593286848(t.changedTouches[0],t),g.push(e)))():void 0))()}),e.addEventListener("touchend",function(t){return(()=>e.clearDelay_705357537593286848())()})))():(()=>(e.addEventListener("mousedown",function(t){return(()=>(e.clearDelay_705357537593286848(),t!==y&&(()=>(y=t,I()))(),0===t.button?(()=>(a=t,e.setDelay_705357537593286848(t,t),g.push(e)))():void 0))()}),e.addEventListener("mouseup",function(t){return(()=>e.clearDelay_705357537593286848())()})))();var n,r},S=function(e){return n=!1,["handheld","tablet"].indexOf(t.deviceType)>=0?(()=>(e.addEventListener("touchstart",function(t){return(()=>1===t.touches.length?(t.pointerDownDispatched_705357537593286848||(()=>(t.pointerDownDispatched_705357537593286848=!0,e.dispatchEvent(l(t.changedTouches[0].clientX,t.changedTouches[0].clientY))))(),void(n=!0)):void 0)()}),e.addEventListener("touchend",function(t){return(()=>0===t.touches.length&&o(e,t.changedTouches[0])?(t.pointerUpDispatched_705357537593286848||(()=>(t.pointerUpDispatched_705357537593286848=!0,e.dispatchEvent(d(t.changedTouches[0].clientX,t.changedTouches[0].clientY))))(),void(n=!1)):void 0)()}),e.addEventListener("touchmove",function(t){return(()=>1===t.touches.length&&n?(()=>o(e,t.changedTouches[0])?(()=>t.pointerDownMoveDispatched_705357537593286848?void 0:(()=>(t.pointerDownMoveDispatched_705357537593286848=!0,e.dispatchEvent(v(t.changedTouches[0].clientX,t.changedTouches[0].clientY))))())():(e.dispatchEvent(p()),void(n=!1)))():void 0)()})))():(()=>(e.addEventListener("mousedown",function(t){return(()=>0===t.button?(t.pointerDownDispatched_705357537593286848||(()=>(t.pointerDownDispatched_705357537593286848=!0,e.dispatchEvent(l(t.clientX,t.clientY))))(),void(n=!0)):void 0)()}),e.addEventListener("mouseup",function(t){return(()=>0===t.button?(t.pointerUpDispatched_705357537593286848||(()=>(t.pointerUpDispatched_705357537593286848=!0,e.dispatchEvent(d(t.clientX,t.clientY))))(),void(n=!1)):void 0)()}),e.addEventListener("mousemove",function(t){return(()=>n&&!t.pointerDownMoveDispatched_705357537593286848?(()=>(t.pointerDownMoveDispatched_705357537593286848=!0,e.dispatchEvent(v(t.clientX,t.clientY))))():void 0)()}),e.addEventListener("mouseleave",function(t){return(()=>n?(e.dispatchEvent(p()),void(n=!1)):void 0)()})))();var n},P=[],b=function(n){return[o,i]="handheld"===(r=t.deviceType)?[5e-4,1e-4]:"tablet"===r?[333e-6,667e-7]:[null,null],a=function(){return(()=>(function e(t){return void 0===t&&(t=n),z(t)?(()=>void 0===(r=t.wheelTouchThreshold_705357537593286848)||null===r?e(t.parentElement):r)():.001;var r})())()},n.clearWheelTimer_705357537593286848=function(){return z(l)&&(()=>window.cancelAnimationFrame(l))(),void(l=null)},c=null,u=!1,s=null,l=null,d=null,v=null,p=null,f=null,E=null,["handheld","tablet"].indexOf(t.deviceType)>=0?(()=>(n.addEventListener("touchstart",function(e){return 1===e.touches.length&&(c=e.changedTouches[0].clientY/document.remInPixels_705357537593286848),u=!1,P.forEach(function(e){return(()=>e.clearWheelTimer_705357537593286848())()}),void(P=[])}),n.addEventListener("touchend",function(e){return(()=>0===e.touches.length&&u?(()=>p/document.viewportSize_705357537593286848.y>=o&&!e.wheelDispatched_705357537593286848?(()=>(e.wheelDispatched_705357537593286848=!0,v=window.performance.now(),n.clearWheelTimer_705357537593286848(),l=window.requestAnimationFrame(function e(t){return(p-=.007*p*(r=t-v))/document.viewportSize_705357537593286848.y>i&&(n.dispatchEvent(h(Math.sign(d)*p*r)),l=window.requestAnimationFrame(e)),void(v=t);var r}),P.push(n)))():void 0)():void 0)()}),n.addEventListener("touchmove",function(e){return 1===e.touches.length?(t=e.changedTouches[0].clientY/document.remInPixels_705357537593286848,u?i=u:(()=>(r=t-c,o=a(),r>o?(s=c+o,void(i=!0)):(()=>r<-o?(s=c-o,void(i=!0)):void(i=u))()))(),i&&(d=-(t-s),l=window.performance.now(),null===v&&(v=l-6e4),p=Math.abs(d)/(l-v),v=l,0===d||e.wheelDispatched_705357537593286848||(()=>(u||(()=>n.dispatchEvent(m(d>0)))(),e.wheelDispatched_705357537593286848=!0,n.dispatchEvent(h(d))))(),s=t),void(u=i)):void 0;var t,r,o,i,l})))():(()=>(_=screen.height/document.remInPixels_705357537593286848,n.addEventListener("wheel",function(t){return o=window.performance.now(),null===v&&(v=o-6e4),r=t.deltaMode,i=r===WheelEvent.DOM_DELTA_PIXEL?(()=>t.deltaY)():r===WheelEvent.DOM_DELTA_LINE?(()=>12*t.deltaY)():r===WheelEvent.DOM_DELTA_PAGE?(()=>300*t.deltaY)():(()=>(0,e.fail)())(),d=i/document.remInPixels_705357537593286848,a=d/_/(o-v),0===d||t.wheelDispatched_705357537593286848||(()=>((null===(c=null===f?null:(()=>a/f)())||c<0||c>4)&&((null===E||o-E>400)&&(()=>n.dispatchEvent(m(d>0)))(),E=o),t.wheelDispatched_705357537593286848=!0,n.dispatchEvent(h(d))))(),f=a,void(v=o);var r,o,i,a,c})))();var r,o,i,a,c,u,s,l,d,v,p,f,E,_},k=function(e){return t=!1,n=null,e.addEventListener("scroll",function(r){return t||(()=>(t=!0,e.dispatchEvent(f())))(),z(n)&&(()=>window.clearTimeout(n))(),void(n=window.setTimeout(function(){return(()=>(t=!1,e.dispatchEvent(E())))()},250))});var t,n},exports.parseTransform=M=function(t){return(()=>F(e.dotDot_573300145710716007,t,"matches",[N("( translate | rotate | scale | rotate3d | rotateX | rotateY | perspective ) \\( ( [^)]* ) \\)")]).map(function(e){return(()=>({name:e[1].trim(),value:e[2].trim()}))()}))()},exports.stringifyTransform=Y=function(e){return(()=>e.map(function(e){return(()=>e.name+"("+e.value+")")()}).join(" "))()},exports.updateTransformItemValue=X=function(t,n,r){return o="translate"===n?(()=>r.x+","+r.y)():(()=>"scale"===n?(()=>r.x+","+r.y)():(()=>"rotate"===n?(()=>r.toString()+"rad")():(()=>"rotate3d"===n?(()=>(i=F(e.dotDot_573300145710716007,Math,"principalRadians",[r.axisAngle]),F(e.dotDot_573300145710716007,i,"approxEquals",[Math.PI/2])?(()=>(n="rotateY",r.angle+"rad"))():(()=>F(e.dotDot_573300145710716007,i,"approxEquals",[-Math.PI/2])?(()=>(n="rotateY",-r.angle+"rad"))():(()=>F(e.dotDot_573300145710716007,i,"approxEquals",[0])?(()=>(n="rotateX",r.angle+"rad"))():(()=>F(e.dotDot_573300145710716007,i,"approxEquals",[Math.PI])||F(e.dotDot_573300145710716007,i,"approxEquals",[-Math.PI])?(()=>(n="rotateX",-r.angle+"rad"))():(()=>(-Math.PI/2<(l=i)&&l<Math.PI/2?(a=1,c=Math.tan(i)):(a=-1,c=-Math.tan(i)),a+","+c+",0,"+r.angle+"rad"))())())())()))():(()=>"perspective"===n?(()=>"string"==typeof r&&0===parseFloat(r)||0===r.value?"1000000000000px":(()=>r.toString())())():(()=>(0,e.fail)())())())())())(),u=M(t),(()=>{try{return(()=>((s=(()=>{var t=n;return"translate"===t?(()=>u[2])():"rotate"===t?(()=>u[3])():"scale"===t?(()=>u[4])():"perspective"===t?(()=>u[5])():"rotate3d"===t?(()=>u[6])():"rotateX"===t?(()=>u[6])():"rotateY"===t?(()=>u[6])():(()=>(0,e.fail)())()})()).name=n,s.value=o,Y(u)))()}catch(e){return(()=>(t+" "+n+"("+o+")").trim())()}})();var o,i,a,c,u,s,l},exports.setTransformItemValue=O=function(e,t,n){return r=void 0===(i=e.style.transform)||null===i?e.style.webkitTransform:i,o=X(r,t,n),z(e.style.transform)?void(e.style.transform=o):void(e.style.webkitTransform=o);var r,o,i},exports.transformStringWithoutPerspective=q=function(e){return t=e.match(new RegExp("^(.*)\\bperspective\\b")),z(t)?(()=>t[1].trim())():(()=>e)();var t},exports.removePerspectiveTransform=A=function(e){return t=void 0===(o=e.style.transform)||null===o?e.style.webkitTransform:o,r=q(t),n(e,"transform",r);var t,r,o},exports.parseElement=W=function(e){return t=(new DOMParser).parseFromString(e,"application/xml").documentElement,document.adoptNode(t),t;var t},exports.setStyle=n,exports.getStyle=r,exports.isInputInElement=o,exports.isLastPositionedInputInElement=i,exports.getCustomEventName=c,exports.initElementEvents=_,exports.parseTransform=M,exports.stringifyTransform=Y,exports.updateTransformItemValue=X,exports.setTransformItemValue=O,exports.transformStringWithoutPerspective=q,exports.removePerspectiveTransform=A,exports.parseElement=W;